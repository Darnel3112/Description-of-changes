Конфигурация.ITILКОРП - в рабочую область начальной страницы добавлена форма обработки "Обработка.ПР_АРМСистемногоАдминистратора.Форма"

============================================================================================================================

Подсистемы.itilprofУправлениеКонфигурациямиИАктивамиУслуги - добавлены новые объекты:
1) Документы.ПР_АктВыполненыхРабот (временно скрыть от пользователей)
2) Обработки.ПР_АРМСистемногоАдминистратора
3) Обработки.ПР_АРМСогласованияДокументов

============================================================================================================================

ОбщиеМодули.ДополнительныеОтчетыИОбработкиКлиент.ВыполнитьОткрытиеФормыОбработки - модуль снят с поддержки, добавлена возможность передавать структуру параметров на форму внешней обработки

============================================================================================================================

ОбщиеМодули.ОбщегоНазначения.ИмяБазовогоТипаПоОбъектуМетаданных - добавлен механизм возврата базового имени объекта метаданных для обработок

============================================================================================================================

ОбщиеМодули.УправлениеПечатьюПереопределяемый.ПриОпределенииОбъектовСКомандамиПечати - в список объектов добавлены Обработка.ПР_АРМСистемногоАдминистратора и Документ.ПР_АктВыполненыхРабот

============================================================================================================================

ОбщиеМодули.УправлениеСвойствами.ПередЗаписьюВидаОбъекта - дополненно условие создания нового набора доп. свойств

============================================================================================================================

ОбщиеМодули.ПР_Telegram.ДобавитьПричинуОтклонения - добавлен новый обязательный параметр, изменен способ записи в историю согласования
ОбщиеМодули.ПР_Telegram.ПодтвердитьСогласованиеДокумента - изменен способ записи в историю согласования
ОбщиеМодули.ПР_Telegram.ТекущийПользовательЭтоПодписант - функция стала экспортной
ОбщиеМодули.ПР_Telegram.ОбработкаСообщений - добавлена обработка нового режима ввода
ОбщиеМодули.ПР_Telegram.ОтправкаУведомлений - изменен способ распределение документов на подписание, теперь пользователь у которого флаг "ПР_СогласованиеЧерезАРМ" = истина будет 
подписывать документы только через свой АРМ, а не через Telegram

ОбщиеМодули.ПР_Telegram.УстановитьЗначенияПользователя - обновлен вызов функции "ДобавитьПричинуОтклонения"

============================================================================================================================

ОбщиеМодули.ПР_ОбщегоНазначенияСервер.МаксимальноеЗначениеВМассиве - новая функция, возвращает максимальное значение из переданного массива
ОбщиеМодули.ПР_ОбщегоНазначенияСервер.ПолучитьМассивТиповАктивовНаСписание - новая функция, возвращает массив с типами активов с типом учета "Основное средство"
ОбщиеМодули.ПР_ОбщегоНазначенияСервер.ПолучитьПользователяПоФизЛицу - добавлен новый необязательный параметр "ПользовательЕстьВТГ", данный параметр изменяет значение на "Истина", 
если пользователь зарегистрированн в чат-боте

ОбщиеМодули.ПР_ОбщегоНазначенияСервер.ПолучитьСсылкиНаПодчиненныеДокументы - новая функция, возвращает массив ссылок на подчиненные документы
ОбщиеМодули.ПР_ОбщегоНазначенияСервер.ПолучитьТекущегоПодписантаПеремещенияАктивов - новая функция, перенесена с формы документа "itilprofПеремещениеАктивов"
ОбщиеМодули.ПР_ОбщегоНазначенияСервер.РавномерноеРаспределениеСуммыНДС - новая функция, возвращает массив с суммами
ОбщиеМодули.ПР_ОбщегоНазначенияСервер.РаспределитьПропорционально - новая функция, возвращает массив распределенных коэффициентов
ОбщиеМодули.ПР_ОбщегоНазначенияСервер.ФизЛицоМОЛРабочегоМестаПоДокументу - новая функция, возвращает "Истина", если переданное физическое лицо является МОЛов рабочего места указанного в документе
ОбщиеМодули.ПР_ОбщегоНазначенияСервер.ЗаписьОшибкиВЖурналРегистрации - новая процедура, запись ошибки в журнал регистрации, по переданому имени события и сообщению
ОбщиеМодули.ПР_ОбщегоНазначенияСервер.ЗаполнитьПоступлениеСоставИКлючВладельца - процедура вынесена в общий модуль из модулей форм документа "Поступление активов" и справочника "Активы"
ОбщиеМодули.ПР_ОбщегоНазначенияСервер.ОтклонитьПеремещениеАктивов - новая процедура, перенесена с формы документа "itilprofПеремещениеАктивов"
ОбщиеМодули.ПР_ОбщегоНазначенияСервер.СогласоватьПеремещениеАктивов - новая процедура, перенесена с формы документа "itilprofПеремещениеАктивов"
ОбщиеМодули.ПР_ОбщегоНазначенияСервер.УправлениеОчередьюОповещений - новая процедура, перенесена с формы документа "itilprofПеремещениеАктивов"

============================================================================================================================

ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПолучитьДокументПоПараметрам - переименованная функция "ТакойДокументЕсть", возвращает ссылку на документ, найденный по параметрам
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПолучитьПараметрыПоиска - новая функция, возвращает пустую структуру параметров поиска документов
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.СписокДокументовПроцессПеремещение - переименованная функция "СписокДокументов". 
Возвращает таблицу значений со списком документов, созданных на основании itilprofПеремещениеАктивов

ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.СписокДокументовПроцессРемонт - новая функция, возвращает таблицу значиний в которой находится список документов созданный на основании itilprofКомплектацияАктивов, 
itilprofСписаниеРасходногоМатериала, itilprofСписаниеАктивов

ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.КомплектацияНоменклатурыОбновитьТЧКомплектующие - новая процедура, обновление данных в табличной части "Комплектующие" документа
"ПР_КомплектацияНоменклатурыДляОбмена". Вызывается из процедуры "ОбработатьНайденныеКомплектации"

ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.КомплектацияНоменклатурыОбработкаПозицийАктивов - новая процедура, создание нового документа или пометка на удаление существующего документа, в зависимости от того,
добавлен новый или удален старый актив из табличной части документа-источника. Вызывается из процедуры "ОбработатьНайденныеКомплектации"

ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.КомплектацияНоменклатурыОтличияВШапке - новая процедура, пометка на удаление существующего документа, если в документе-источнике были изменены реквизиты в шапке.
Вызывается из процедуры "ОбработатьНайденныеКомплектации"

ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ОбработатьНайденныеКомплектации - новая процедура, обработка записи изменений в документе-источнике, для подчиненного документа "ПР_КомплектацияНоменклатурыДляОбмена"
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ОбработатьНайденныеСписанияОС - новая процедура, обработка записи изменений в документе-источнике, для подчиненного документа "ПР_СписаниеОСДляОбмена"
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ОбработатьРасходСписаниеОС - новая процедура, обработка записи изменений в документе-источнике, для подчиненного документа "ПР_РасходМатериаловДляОбмена"
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.пр_СозданиеДокументовДляОбменаДокументыРемонтаПриЗаписи - новая процедура-обработчик регламентного задания "пр_СозданиеДокументовДляОбменаДокументыРемонта"
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПР_СозданиеДокументовДляОбменаПеремещенияАктивовПриЗаписи - изменены условия выхода из процедуры, изменены запросы получения данных, для создания подчиненных документов
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаКомплектация - новая процедура, сбор данных для создания технических документов "ПР_СписаниеОСДляОбмена" или "ПР_КомплектацияНоменклатурыДляОбмена"
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаКомплектацияНоменклатуры - новая процедура, сбор данных для создания или изменения технических документов "ПР_КомплектацияНоменклатурыДляОбмена"
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаНаПередачаОСИПоступлениеТоваровРазныеФирмы - переопределены вызовы переименованных процедур
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаНаПеремещениеОСВводВЭксплуатацию - переопределены вызовы переименованных процедур
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаНаПеремещениеОСПеремещение - переопределены вызовы переименованных процедур
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаНаПеремещениеТоваров - переопределены вызовы переименованных процедур
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаНаПринятиеКУчету - переопределены вызовы переименованных процедур, изменен запрос сбора данных для создания документов
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаНаПринятиеКУчетуОСРазныеФирмы - переопределены вызовы переименованных процедур, изменен запрос сбора данных для создания документов
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаНаРасходМатериалов - процедура удалена, алгоритм создания технических документов "ПР_РасходМатериаловДляОбмена", перенесен из процесса "Перемещение"
в процесс "Ремонт"

ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаНаРасходМатериаловРазныеФирмы - процедура удалена, алгоритм создания технических документов "ПР_РасходМатериаловДляОбмена", перенесен из процесса "Перемещение"
в процесс "Ремонт"

ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаНаРеализациюТовараИПоступлениеТовара - переопределены вызовы переименованных процедур
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаРасходМатериаловСписаниеОС - новая процедура, проверка на создание/изменение документа "ПР_РасходМатериаловДляОбмена", при типе ремонта "СписаниеОС"
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаСозданияКомплектацииНоменклатуры - новая процедура, проверка на создание/изменение документа "ПР_КомплектацияНоменклатурыДляОбмена"
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаСозданияМодернизацииОС - новая процедура, проверка на создание/изменение документа "ПР_МодернизацияОСДляОбмена"
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаСозданияОприходованияНоменклатуры - новая процедура, проверка на создание/изменение документа "ПР_ОприходованиеНоменклатурыДляОбмена"
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаСозданияРасходаМатериалов - новая процедура, проверка на создание/изменение документа "ПР_РасходМатериаловДляОбмена"
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаСозданияСписаниеОС - новая процедура, проверка на создание/изменение документа "ПР_СписаниеОСДляОбмена"
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаСписаниеОС - новая процедура, проверка на создание/изменение документа "ПР_СписаниеОСДляОбмена"
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.СоздатьДокументПроцессМонтаж - переименованная процедура из "СоздатьДокумент". Создание подчиненных документов, на основании "itilprofПеремещениеАктивов"
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.СоздатьДокументПроцессРемонт - переименованная процедура из "СоздатьДокумент". Создание подчиненных документов, на основании itilprofКомплектацияАктивов, 
itilprofСписаниеРасходногоМатериала, itilprofСписаниеАктивов

ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.СоздатьКомплектацию - новая процедура создание документа "ПР_КомплектацияНоменклатурыДляОбмена", на основании "itilprofСписаниеАктивов"
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.СоздатьРасходСписаниеОС - новая процедура создание документа "ПР_РасходМатериаловДляОбмена", на основании "itilprofСписаниеАктивов"
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.СоздатьСписаниеОС - новая процедура создание документа "ПР_СписаниеОСДляОбмена", на основании "itilprofСписаниеАктивов"
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.оставлениеОбщейТаблицыТехническогоДокумента - новая процедура, сбор данных из документов itilprofКомплектацияАктивов и itilprofСписаниеРасходногоМатериала,
определение по какому алгоритму создание документов двигаться дальше

ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.СписаниеОСОбработкаИзмененныхОС - новая процедура, поиск изменений в ТЧ ОС и (или) в ТЧ ЦенностиОтВыбытия
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.СписаниеОСОбработкаНовыхОС - новая процедура, поиск новых строк, которых нет в подчиненных документах, создание новых документов по найденным строкам.
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.СписаниеОСОбработкаУдаленныхОС - новая процедура, поиск удаленных строк, удаление этих строк из ТЧ подчиненных документов.
Если ТЧ ОС в подчиненном документе стала пустой, то документ будет помечен на удаление

ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.СписаниеОСОтличияВШапкеДокумента - новая процедура, поиск отличий в шапке документа, если таковые есть, то помечаем на удаление подчиненные документы.
ОбщиеМодули.Области - добавлены новые области, для учучшения читаемости кода: ДокументыРемонта, СписаниеОС, КомплектацияНоменклатуры, МодернизацияОС, РасходМатериалов, ОприходованиеНоменклатуры

============================================================================================================================

ОбщиеМодули.ПР_КонтрольСвободныхОстатков.ПроведениеОстатковРезервыАктивов - изменены псевдонимы полей запроса.

============================================================================================================================

ОбщиеМодули.пр_СогласованиеДокументов - новый общий модуль, в данный модуль перенесены механизмы согласования, которые распологались в разных частях конфигурации

============================================================================================================================

Роли.ITIL_БазовыеПрава

Роли.ПР_Кладовщик

Роли.ПР_СозданиеПроведениеТехническихДокументов

Роли.ПР_СистемныйАдминистратор

Роли.ПР_ЧтениеТехническихДокументов

Роли.пр_ПодписантыTelegram

Роли.ПР_ИспользованиеАРМСогласованияДокументов - новая роль, даёт пользователю права на использование внешней обработки "ПР_АРМСогласованияДокументов"
Роли.пр_ЧтениеИзменениеИсторииЗакупа - новая роль, даёт пользователю права на чтение и изменение регистра сведений "пр_ИсторияЗакупаКонфигурационныхЕдиниц"
Роли.пр_ЧтениеИзменениеИзносаАктивов - новая роль, даёт пользователю права на чтение и изменение регистра сведений "пр_ИзносАктивовПоГодам"
Роли.пр_ЧтениеИИзменениеАктаПринятыхРабот - новая роль, даёт пользователю права на чтение и изменение документа "ПР_АктВыполненыхРабот"

============================================================================================================================

КритерииОтбора.itilprofДокументыПоАктиву - из состава исключен реквизит "РасходныйМатериал" табличной части "Активы", документа "itilprofСписаниеРасходногоМатериала",
включены в состав реквизиты "РасходныйМатериал", табличной части "ПР_РасходныеМатериалы", документа "itilprofСписаниеРасходногоМатериала",
реквизит "Актив", табличной части "Активы", документа "ПР_АктВыполненыхРабот"

============================================================================================================================

КритерийОтбора.СвязанныеДокументы - в состав добавлены реквизиты с названием "ДокументОснование", из шапок и табличных частей следующих документов:
ПР_АктВыполненыхРабот, ПР_КомплектацияНоменклатурыДляОбмена, ПР_МодернизацияОСДляОбмена, ПР_ОприходованиеНоменклатурыДляОбмена, ПР_РасходМатериаловДляОбмена, ПР_СписаниеОСДляОбмена

============================================================================================================================

ПодпискиНаСобытия.пр_СозданиеДокументовДляОбменаДокументыРемонта - новая подписка на событие "ПриЗаписи". 
Источники: ДокументОбъект.itilprofСписаниеАктивов, ДокументОбъект.itilprofКомплектацияАктивов, ДокументОбъект.itilprofСписаниеРасходногоМатериала

============================================================================================================================

ПодпискиНаСобытия.ПР_ПередЗаписьюОстатков - добавлен новый источник, документ ПР_АктВыполненыхРабот
ПодпискиНаСобытия.ПР_ПроведениеОстатков - добавлен новый источник, документ ПР_АктВыполненыхРабот
ПодпискиНаСобытия.ПР_ОтменаПроведенияОстатков - добавлен новый источник, документ ПР_АктВыполненыхРабот

============================================================================================================================

ОбщиеКоманды.пр_ИзносАктивовПоГодам - новая общая команда. Используется как кнопка-гиперссылка в форме элемента справочника itilprofТипыАктивов. 
Вызывает форму списка регистра сведений "пр_ИзносАктивовПоГодам"

============================================================================================================================

ОбщиеФормы.itilprofФормаПодбораАктивов: 
1) Добавлены новые реквизиты формы:
    а) ТаблицаИсключений - тип Таблица значений
    б) ПР_ЭтоКладовщик - тип Булево
2) Изменен запрос динамического списка "ТаблицаОстатков"
3) Выведен новый эелемент формы "КоличествоОстаток", в таблицу формы "ТаблицаОстатков"

ОбщиеФормы.itilprofФормаПодбораАктивов.ВернутьНачальныйТекстЗапроса - добавлено изменение текста запроса динамического списка, в зависимости от условий
ОбщиеФормы.itilprofФормаПодбораАктивов.ОбработкаТаблицыВыбранных - изменен механизм формирования таблицы выбранных
ОбщиеФормы.itilprofФормаПодбораАктивов.СоставитьТаблицуИсключений - новая функция, возвращает таблицу значений с позициями, которые нужно исключить из резултата динамического списка
ОбщиеФормы.itilprofФормаПодбораАктивов.ПолучитьТекстЗапросаДСОстатки - изменен механизм формирования текста запроса динамического списка, по остаткам, добавлен вызов процедуры "СоставитьТаблицуИсключений"
ОбщиеФормы.itilprofФормаПодбораАктивов.пр_ФирмаПриИзменении - добавлен флаг о использовании отбора
ОбщиеФормы.itilprofФормаПодбораАктивов.ПриСозданииНаСервере - добавлено программное изменение свойств элементов формы и установка нового параметра динамического списка.
ОбщиеФормы.itilprofФормаПодбораАктивов.ТаблицаОстатковВыборЗначения - убрана закомментированная строка

============================================================================================================================

Документы.itilprofЗапросы:
1) Добавлены реквизиты:
    а) ПР_ФирмаДоЗВСС - тип данных: СправочникСсылка.ПР_Фирмы
    б) ПР_ДоговорЗВСС - тип данных: СправочникСсылка.ДоговорыКонтрагентов
    в) Табличная часть "ПР_КонфигурационныеЕдиницыЗаявкиНаВыдачу", реквизит ФирмаДоЗВС - тип данных: СправочникСсылка.ПР_Фирмы

2) Изменено свойство "Неотрицательное" у следующих реквизитов табличных частей документа:
    а) ТЧ "КонфигурационныеЕдиницы": Цена, Всего, Сумма, СуммаНДС
    б) ТЧ "ПР_КонфигурационныеЕдиницы": Цена, Всего, Сумма

3) Добавлена форма "ПР_ФормаВыбораФирмыСозданияПеремещения", необходима для выбора фирмы, для создания перемещения на основании Запроса с видом "Заявка на выдачу со склада"    

Документы.itilprofЗапросы.МодульОбъекта.ЗаписатьВРезерв - изменен запрос, сбора данных перед записью в регистр "ПР_РезервыАктивов"
Документы.itilprofЗапросы.МодульОбъекта.ПередЗаписью - добавлено автоматическое заполнение реквизита "ФирмаДоЗВС", табличной части "ПР_КонфигурационныеЕдиницыЗаявкиНаВыдачу"

============================================================================================================================

Документы.ПР_МодернизацияОСДляОбмена - новый документ, является техническим документом, необходимым для обмена между ITIL и БП КОРП. 
Создается на основании документов "itilprofКомплектацияАктивов" и "itilprofСписаниеРасходногоМатериала"

============================================================================================================================

Документы.ПР_КомплектацияНоменклатурыДляОбмена - новый документ, является техническим документом, необходимым для обмена между ITIL и БП КОРП. 
Создается на основании документов "itilprofКомплектацияАктивов", "itilprofСписаниеАктивов"

============================================================================================================================

Документы.ПР_СписаниеОСДляОбмена - новый документ, является техническим документом, необходимым для обмена между ITIL и БП КОРП. 
Создается на основании документов "itilprofКомплектацияАктивов", "itilprofСписаниеАктивов"

============================================================================================================================

Документы.ПР_ОприходованиеНоменклатурыДляОбмена - новый документ, является техническим документом, необходимым для обмена между ITIL и БП КОРП. 
Создается на основании документов "itilprofКомплектацияАктивов"

============================================================================================================================

Документы.ПР_АктВыполненыхРабот - новый документ, используется для принятия к учету в ITIL переданных контрагентом активов в результате монтажа.
Данный документ совершает движения по регистрам: 1) itilprofАктивы, 2) itilprofРасходныеМатериалы, 3) itilprofСоставАктивов, 4) ПР_АктивыПолученныеИзМонтажа

============================================================================================================================

Перечисления.ПР_ПричиныЗаменыКомплектующих - новое перечисление, используется в документах: itilprofСписаниеРасходногоМатериала, itilprofКомплектацияАктивов и в обработке "ПР_АРМСистемногоАдминистратора"

============================================================================================================================

Перечисления.ПР_СпособРаспределения - новое перечисление, используется в документе ПР_АктВыполненыхРабот

============================================================================================================================

Перечисления.пр_ТипыАктаВыполненныхРабот - новое перечисление, используется в документе ПР_АктВыполненыхРабот

============================================================================================================================

Обработки.ПР_АРМСистемногоАдминистратора - новая обработка, автоматизированное рабочее место системного администратора

============================================================================================================================

Обработки.ПР_АРМСогласованияДокументов - новая обработка, автоматизированное рабочее место директора подразделения, для согласования документов своего подразделения

============================================================================================================================

РегистрыСведений.ПР_АвтоматическиСписываемыеПозиции - новый регистр сведений, используется для хранения позиций, которые должны списываться автоматически, в результате перемещения

============================================================================================================================

РегистрыСведений.ПР_СостоянияСогласованияДокументов - новый регистр сведений, используется для хранения состояний согласования документов:
itilprofКомплектацияАктивов, itilprofСписаниеРасходногоМатериала, itilprofСписаниеАктивов, itilprofПеремещениеАктивов

============================================================================================================================

РегистрыСведений.пр_ИзносАктивовПоГодам - новый регистр сведений, используется для указания процента износа типа актива, по годам

============================================================================================================================

РегистрыСведений.пр_ИсторияЗакупаКонфигурационныхЕдиниц - новый регистр сведений, используется для хранения истории цена на позиции. 
История цен выгружается по поступлениям из БП КОРП, при помощи внешней обработки "Заполнение регистра "История закупа", по данным БП"

============================================================================================================================

РегистрыСведений.ПР_АктивыПолученныеИзМонтажа - новый регистр сведений, используется для хранения состояния активов, полученных от контрагента из монтажа. (принят или не принят к учету данный актив)

============================================================================================================================

