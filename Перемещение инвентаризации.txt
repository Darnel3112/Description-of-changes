Роли.пр_Бухгалтер - добавлена новая роль. Данная роль дает право на создание документа "Перемещение активов" для целей инвентаризации, т.е. с обходом ограничений
Роли.пр_ПодписантыTelegram - новая роль. Нужна для взаимодействия пользователя с чат-ботом Telegram в момент отправки на согласование документа "Перемещение активов"
Роли.ПР_СозданиеПроведениеТехническихДокументов - новая роль, права на создание и проведение технических документов (ПЕР.ОБМЕН-06)
Роли.ПР_ЧтениеТехническихДокументов - новая роль, права на чтение и просмотр технических документов (ПЕР.ОБМЕН-06)
Роли.ITIL_БазовыеПрава - добавлены права на чтение и просмотр константы "ПР_МаршрутЗаявкаНаВыдачуСоСклада"

=====================================================================================

ОбщиеКоманды.пр_СвязанныеДокументы - добавлена новая команда, для показа структуры подчиненности из форм списков документов

=====================================================================================

ОбщиеКартинки.пр_СтруктураПодчиненности - добавлена новая картинка в коллекцию. Используется в общей команде "пр_СвязанныеДокументы"

=====================================================================================

ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПР_СозданиеДокументовДляОбменаПеремещенияАктивовПриЗаписи - Изменена процедура, добавлено условие отказа создания документов, 
если это инвентаризация. Изменен запрос таблицы с фирмами, добавлен вызов процедуры "УдалитьДвиженияУДокумента", для корректного создания тех. документов, изменен запрос состояния актива

ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаНаПередачаОСИПоступлениеТоваровРазныеФирмы - изменена процедура, убрана добавляема колонка фирмы до, так как теперь она есть изначально
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаНаПеремещениеОСВводВЭксплуатацию - изменена процедура, убрана добавляема колонка фирмы до, так как теперь она есть изначально
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаНаПеремещениеОСПеремещение - изменена процедура, убрана добавляема колонка фирмы до, так как теперь она есть изначально

ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаНаПеремещениеТоваров - добавлено переопределение переменной "ФирмаПосле" в зависимости от условия, 
добавлена группировка табличной части с суммированием по количеству

ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаНаПринятиеКУчетуОСРазныеФирмы - отформатирован текст запроса
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаНаРасходМатериалов - изменена процедура, изменено получение фирмы после, теперь берется из ТЧ
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаНаРасходМатериаловРазныеФирмы - изменен способ заполнения поля "Склад", добавлено заполнение статьи затрат, изменено получение фирмы после
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.ПроверкаНаРеализациюТовараИПоступлениеТовара - изменена процедура, убрана добавляема колонка фирмы до, так как теперь она есть изначально
ОбщиеМодули.ПР_СозданиеДокументовДляОбмена.СоздатьДокумент - изменено получение фирм до и после. теперь беруться из тч

=====================================================================================

ОбщиеМодули.ДатыЗапретаИзменения.ПроверитьДатуЗапретаИзмененияПередЗаписьюДокумента - добавлено условие обхода проверки даты запрета

=====================================================================================

ОбщиеМодули.ПР_Telegram.ПодтвердитьСогласованиеДокумента - добавлено перезаполнение даты документа, добавлен параметр в "ДополнительныеСвойства"

=====================================================================================

ОбщиеФормы.itilprofФормаПодбораАктивов.ПриСозданииНаСервере - добавлено заполнение реквизита формы "пр_Фирма" из передаваемых на форму параметров
ОбщиеФормы.itilprofФормаПодбораАктивов.ТаблицаОстатковВыборЗначения - изменен механизм заполнения таблицы "ТаблицаВыбранных", реализован множественный выбор

=====================================================================================

Справочники.itilprofАктивы.ФормаСписка:
Изменен запрос динамического списка "Активы", добавлено поле "Фирма"

Справочники.itilprofАктивы.ФормаСписка.ВыбратьАктив - Изменена процедура, добавлена в структуру на возврат фирма, что бы заполнять ее в тч у выбранного актива
Справочники.itilprofАктивы.ФормаСписка.УстановитьЗапросСпискаАктивов - в запрос динамического списка добавлено поле "Фирма"
Справочники.itilprofАктивы.ФормаСписка.ПриСозданииНаСервере - установка отбора по полю "Фирма"

=====================================================================================

Справочники.itilprofТипыАктивов:
1) Реквизит "ПР_СтатьяЗатрат", изменено свойство "Проверка заполнения"

Справочники.itilprofТипыАктивов.ФормаЭлемента.ПередЗаписьюНаСервере - добавлена проверка заполнения реквизита "ПР_СтатьяЗатрат" в зависимости от условия
Справочники.itilprofТипыАктивов.ФормаЭлемента.ПР_УчетПриИзменении - добавлены сброс значения реквизита "ПР_СтатьяЗатрат" вызов процедуры "ПроверкаСтатьиЗатрат"
Справочники.itilprofТипыАктивов.ФормаЭлемента.ПриОткрытии - добавлен вызов процедуры "ПроверкаСтатьиЗатрат"
Справочники.itilprofТипыАктивов.ФормаЭлемента.ПроверкаСтатьиЗатрат - новая процедура, управление свойствами "Видимость" и "АвтоОтметкаНезаполненного" элемента формы "ПР_СтатьяЗатрат"

=====================================================================================

Документы.itilprofКомплектацияАктивов:
1) Реквизит "СтатьяЗатрат", изменено свойство "Проверка заполнения"

=====================================================================================

Документы.itilprofПеремещениеАктивов:
1) Добавлены реквизиты:
    а) "ПР_ОжидаемаяДатаПоставки" - дата
    б) "ПР_ПеремещениеПослеИнвентаризации" - булево
    в) "ПР_ФирмаДоИнвентаризация" - СправочникСсылка.ПР_Фирмы
    г) "ПР_ФирмаПослеИнвентаризация" - СправочникСсылка.ПР_Фирмы
    д) Табличная часть "Активы":
        д1) "ПР_ФирмаДо" - СправочникСсылка.ПР_Фирмы
        д2) "ПР_ФирмаПосле" - СправочникСсылка.ПР_Фирмы
2) Добавлена форма "пр_ФормаВыбора", она же назначена основной формой выбора у документа
3) Запрещено оперативное проведение документа.

Документы.itilprofПеремещениеАктивов.МодульОбъекта.ОбработкаПроведения - добавлена порверка, если это документ инвентаризации, то не выполнять движение 
по регистрам: "Состояние активов", "Очередь уведомлений", добавлено заполнение фирмы в регистре состояния актива, изменена дата регистрации

Документы.itilprofПеремещениеАктивов.МодульОбъекта.ВыполнитьДвиженияПоРегистрам -добавлено заполнение фирмы в зависимости от того, ялвяется ли документ инвентаризацией, 
если да, то берем фирму как фирма до инвентаризация(для движения расходов по активу), аналогично для прихода по активу, но на фирму после инвентаризация.
Добавлена проверка, если это инвентаризация, то не выполнять движение по регистру "Товары в пути", добавлено получение фирмы до и фирмы после в запросе на проверку остатков

Документы.itilprofПеремещениеАктивов.МодульОбъекта.ВыполнитьДвиженияПоРезервам - добавлено получение фирмы до и фирмы после в запросе на проверку резервов
Документы.itilprofПеремещениеАктивов.МодульОбъекта.ВыполнитьДвиженияПоТоварамВПути - изменено создание записей РН товары в пути	
Документы.itilprofПеремещениеАктивов.МодульОбъекта.ОбработкаЗаполнения - добавлено начальное заполнение фирм из Заявки на выдачу со склада

=====================================================================================

Документы.itilprofПеремещениеАктивов.ФормаДокумента:
1) Добавлены новые элементы формы:
    а) Элемент "ПР_ОжидаемаяДатаПоставки"
    б) Группа формы "ГруппаИнвентаризация"
        б1) Элемент "ПР_ПеремещениеПослеИнвентаризации"
        б2) Элемент "ПР_ФирмаДоИнвентаризация"
        б3) Элемент "ПР_ФирмаПослеИнвентаризация"
    в) выведены на форму реквизиты ТЧ "Активы", "ПР_ФирмаДо", "ПР_ФирмаПосле", удалены одноименные реквизиты формы

Документы.itilprofПеремещениеАктивов.ФормаДокумента.ПриОткрытии - изменено условия изменения свойства формы "ТолькоПросмотр", добавлена настройка отображения элементов для инвентаризации
Документы.itilprofПеремещениеАктивов.ФормаДокумента.ПриСозданииНаСервере - устанавливает видимость нового реквизита ПР_ПеремещениеПослеИнвентаризации, если позволяет роль.
Документы.itilprofПеремещениеАктивов.ФормаДокумента.АктивыАктивНачалоВыбора - добавлен параметр передаваемый на форму списка справочника "itilprofАктивы"


Документы.itilprofПеремещениеАктивов.ФормаДокумента.Подбор - добавлен параметр передаваемый на форму "itilprofФормаПодбораАктивов"
Документы.itilprofПеремещениеАктивов.ФормаДокумента.ПР_ПеремещениеПослеИнвентаризацииПриИзменении - новая процедура-обработчик, устанавливает является ли документ инвентаризацией 
Документы.itilprofПеремещениеАктивов.ФормаДокумента.УстановитьИнвентаризацию - новая процедура, является результатом ответа на вопрос о зачистке таблицы активов, для установк/отключения видимости 
реквизитов ивентаризации

Документы.itilprofПеремещениеАктивов.ФормаДокумента.ПР_ФирмаДоИнвентаризацияПриИзменении - новая процедура-обработчик, очищает документ основание и таблицу активы
Документы.itilprofПеремещениеАктивов.ФормаДокумента.ФирмаИзДокОснования - новая функция, возвращает фирму из документа основания
Документы.itilprofПеремещениеАктивов.ФормаДокумента.ПР_ФирмаПослеИнвентаризацияПриИзменении - новая процедура-обработчик, зачищает аналитики после ТЧ активы, заполняет фирму после в тч Активы
Документы.itilprofПеремещениеАктивов.ФормаДокумента.ПроверкаПеремещенияИнвентаризации - новая функция, проверяет доступность ролей
Документы.itilprofПеремещениеАктивов.ФормаДокумента.ПР_ФирмаДоИнвентаризацияНачалоВыбора - новая процедура-обработчик, устанавливает отбор на активе по выбранной фирме, очищает табличную часть "Активы" по условию
Документы.itilprofПеремещениеАктивов.ФормаДокумента.ФирмаДоИнвентаризация - новая процедура, является результатом ответа на вопрос очистки при изменении фирмы до инвентаризация, в случае согласия, открывает форму выбора Фирмы
Документы.itilprofПеремещениеАктивов.ФормаДокумента.ПР_ФирмаПослеИнвентаризацияНачалоВыбора - новая процедура-обработчик, устанавливает отобр на заполнении рабочего места после 
в тч активы и на форме ПР_ФормаЗаполненияРеквизитовТЧАктивы по выбранной фирме

Документы.itilprofПеремещениеАктивов.ФормаДокумента.ФирмаПослеИнвентаризация - новая процедура, является результатом ответа на вопрос очистки при изменении фирмы посел инвентаризация, 
в случае согласия, открывает фрму выбора Фирмы

Документы.itilprofПеремещениеАктивов.ФормаДокумента.АктивыАналитикаПосле1ПриИзмененииНаСервере - убрано заполнение реквизита "ПР_ФирмаПосле" по значению "Аналитика1После"
Документы.itilprofПеремещениеАктивов.ФормаДокумента.АктивыАктивНачалоВыбораЗавершениеОтдельно - добавлено заполнение реквизита ПР_ФирмаДо" табличной части "Активы"
Документы.itilprofПеремещениеАктивов.ФормаДокумента.АктивыАналитикаПосле1ПриИзменении - добавлен вызов процедуры "ЗаполнениеФирм"

Документы.itilprofПеремещениеАктивов.ФормаДокумента.ДокументОснованиеПриИзмененииНаСервере - изменен алгоритм заполнение реквизитов "ПР_ФирмаДо" и "ПР_ФирмаПосле" табличной части "Активы",
по данным значения реквзита "ДокументОснование", отмена заполнение цели из документа основания, если это инвентаризация

Документы.itilprofПеремещениеАктивов.ФормаДокумента.ЗаполнениеФирм - Изменена процедура, изменено алгоритм заполнение реквизитов "ПР_ФирмаДо" и "ПР_ФирмаПосле" табличной части "Активы"
заполнение полей табличной части по значениям реквизитов "ПР_ФирмаДоИнвентаризация", "ПР_ФирмаПослеИнвентаризация"

Документы.itilprofПеремещениеАктивов.ФормаДокумента.ОбновитьРеквизитыФормыСервер - убран вызов процедуры "ЗаполнениеФирм", 

Документы.itilprofПеремещениеАктивов.ФормаДокумента.ПоместитьВТаблицуОборудования - добавлено заполнение реквизита "ПР_ФирмаДо" табличной части "Активы" после подбора активов, 
изменен алгоритм поиска строк при добавлении, добавлен алгоритм удаления строк, если данные строки были удалены на форме подбора активов

Документы.itilprofПеремещениеАктивов.ФормаДокумента.ПР_ОтозватьСогласованиеЗавершить - убран вызов процедуры "ЗаполнениеФирм"
Документы.itilprofПеремещениеАктивов.ФормаДокумента.ПР_ОтправитьНаСогласованиеЗавершение  - убран вызов процедуры "ЗаполнениеФирм"
Документы.itilprofПеремещениеАктивов.ФормаДокумента.ПриЗакрытииФормыЗаполнения - добавлен вызов процедуры "ЗаполнениеФирм"

=====================================================================================

Документы.itilprofПеремещениеАктивов.ФормаСписка - в командный интерфейс формы добавлена общая команда "пр_СвязанныеДокументы"

Обработки.ПР_АРМСнабжения.Форма.СписокЗаказыПоставщикуПриАктивизацииСтроки - изменен алгоритм установки параметров запроса динамического списка "СодержимоеЗаказаПоставщику"
Обработки.ПР_АРМСнабжения.Форма.СписокЗапросыНаОборудованиеПриАктивизацииСтроки - изменен алгоритм установки параметров запроса динамического списка "СодержимоеЗапросаНаОборудование"



