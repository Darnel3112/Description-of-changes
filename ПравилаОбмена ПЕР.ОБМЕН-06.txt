Данный файл содержит описание изменений в правилах обмена между ITIL и БП.
Изменения в правила вносились по трем ТЗ: ПЕР.ОБМЕН-06, ПЕР.ОБМЕН-08 и НСИ-08

===============================================Конвертация==============================================================================

Обработчик конвертации "Перед конвертацией объекта": Условия установки режима записи, дополнены новыми источниками.


==============================================Правила выгрузки данных=====================================================================

ПВД.ПР_РасходМатериаловДляОбмена: 
1) Добавлено новое правило выгрузки данных, необходимо для выгрузки документа "ПР_РасходМатериаловДляОбмена"
2) Используется стандартная выборка данных. В выборку попадают все элементы, зарегистрированный к обмену.
3) Используется ПКО.РасходМатериалов
4) События не используются
5) Алгоритмы/Запросы не используются

=============================================

ПВД.ПР_РеализацияТовараДляОбмена: 
1) Добавлено новое правило выгрузки данных, необходимо для выгрузки документа "ПР_РеализацияТовараДляОбмена"
2) Используется стандартная выборка данных. В выборку попадают все элементы, зарегистрированный к обмену.
3) Используется ПКО.РеализацияТовара
4) События не используются
5) Алгоритмы/Запросы не используются

=============================================

ПВД.ПР_ПередачаОСДляОбмена: 
1) Добавлено новое правило выгрузки данных, необходимо для выгрузки документа "ПР_ПередачаОСДляОбмена"
2) Используется стандартная выборка данных. В выборку попадают все элементы, зарегистрированный к обмену.
3) Используется ПКО.ПередачаОС
4) События не используются
5) Алгоритмы/Запросы не используются

=============================================

ПВД.ПР_ПеремещениеТоваровДляОбмена: 
1) Добавлено новое правило выгрузки данных, необходимо для выгрузки документа "ПР_ПеремещениеТоваровДляОбмена"
2) Используется стандартная выборка данных. В выборку попадают все элементы, зарегистрированный к обмену.
3) Используется ПКО.ПеремещениеТоваров
4) События не используются
5) Алгоритмы/Запросы не используются

=============================================

ПВД.ПР_ПоступлениеТоваровУслугДляОбмена: 
1) Добавлено новое правило выгрузки данных, необходимо для выгрузки документа "ПР_ПоступлениеТоваровУслугДляОбмена"
2) Используется стандартная выборка данных. В выборку попадают все элементы, зарегистрированный к обмену.
3) Используется ПКО.ПоступлениеТоваровУслугИзПеремещения
4) События не используются
5) Алгоритмы/Запросы не используются

=============================================

ПВД.ПР_ПринятиеКУчетуОСДляОбмена: 
1) Добавлено новое правило выгрузки данных, необходимо для выгрузки документа "ПР_ПринятиеКУчетуОСДляОбмена"
2) Используется стандартная выборка данных. В выборку попадают все элементы, зарегистрированный к обмену.
3) Используется ПКО.ПринятиеКУчетуОС
4) События не используются
5) Алгоритмы/Запросы не используются

=============================================

ПВД.ПР_ПеремещениеОСДляОбмена: 
1) Добавлено новое правило выгрузки данных, необходимо для выгрузки документа "ПР_ПеремещениеОСДляОбмена"
2) Используется стандартная выборка данных. В выборку попадают все элементы, зарегистрированный к обмену.
3) Используется ПКО.ПеремещениеОС
4) События не используются
5) Алгоритмы/Запросы не используются


==============================================Правила конвертации данных=====================================================================

ПКО.ПеремещениеТоваров:
1) Добавлено новое правило конвертации данных. Источник "ДокументСсылка.ПР_ПеремещениеТоваровДляОбмена"
Приемник "ДокументСсылка.ПеремещениеТоваров"

2) Поиск объекта в базе приемнике осуществляется по внутреннему идентификатору объекта, если объект не найден, до будет создан новый с соблюдением номерации
базы приемника

3) Для конвертации свойств используются: ПКО.Склады, ПКО.СтруктураПредприятия и ПКО.Номенклатура
4) Используется событие "После загрузки", где производится дозаполнение свойств объекта уникальных для приемника.
5) Алгоритмы/Запросы не используются
6) Нестандартные ПКС: 
    а) В ПКС.Актив → Номенклатура используется событие "Перед выгрузкой", где устанавливается значение в зависимости от условий

=============================================

ПКО.ПеремещениеОС
1) Добавлено новое правило конвертации данных. Источник "ДокументСсылка.ПР_ПеремещениеОСДляОбмена"
Приеминк "ДокументСсылка.ПеремещениеОС"

2) Поиск объекта в базе приемнике осуществляется по внутреннему идентификатору объекта, если объект не найден, до будет создан новый с соблюдением номерации
базы приемника

3) Для конвертации свойств используются: ПКО.ФизическиеЛица и ПКО.СтруктураПредприятия
4) Используется событие "После загрузки", где производится дозаполнение свойств объекта уникальных для приемника.
5) Используются следующие алгоритмы: "ЗаменаОСПоРегиструСоответствия", запросы не используются
6) Нестандартные ПКС: В группа ПКС "ОС" присутсвуют ПКС с передачей значения в параметр:
    а) "ГУИДПрихода" используется событие "Перед выгрузкой". Значение - ГУИД документа почучаемого запросом
    б) "ГУИДОС" используется событие "Перед выгрузкой". Значение - ГУИД элемента справочника "Активы"
    в) "ИнвентарныйНомер" используется событие "Перед выгрузкой". Значение - код элемента справочника "Активы"

=============================================

ПКО.ПринятиеКУчетуОС
1) Добавлено новое правило конвертации данных. Источник "ДокументСсылка.ПР_ПринятиеКУчетуОСДляОбмена"
Приеминк "ДокументСсылка.ПринятиеКУчетуОС"

2) Поиск объекта в базе приемнике осуществляется по внутреннему идентификатору объекта, если объект не найден, до будет создан новый с соблюдением номерации
базы приемника

3) Для конвертации свойств используются: ПКО.СтруктураПредприятия, ПКО.ГруппыОС, ПКО.НоменклатураЮ ПКО.ДоговорыКонтрагентов
ПКО.Контрагенты, ПКО.пит_Проекты, ПКО.ПоступлениеТоваровУслугИзПеремещения и ПКО.ПоступлениеТоваровУслуг

4) Используется событие "После загрузки", где производится дозаполнение свойств объекта уникальных для приемника.
Также в этом событии производится создание новых элементов справочника "Основные средства" и запись данных в регистр сведений "пр_ОсновныеСредстваITIL"

5) Используются:
    а) Алгоритмы: "ЗаменаОСПоРегиструСоответствия", "ЗаполнениеСведенийПрослеживаемостиПоПоступлениям", "ЗаполнениеСведенийПрослеживаемости"
    б) Запросы не используются

6) Нестандартные ПКС:
    а) ПКС ДокументПоступление → пит_ДокументПоступление в обработчике "Перед выгрузкой"
    зависимости от типа значения в источнике, производится выгрузка по указанному правилу
    б) Пареметр "ИсточникПринятия". Параметр представляет собой таблицу значений конвертированную в строку. 
    Значение параметра устанавливается в обработчике "Перед выгрузкой"

=============================================

ПКО.РасходМатериалов
1) Добавлено новое правило конвертации данных. Источник "ДокументСсылка.ПР_РасходМатериаловДляОбмена"
Приеминк "ДокументСсылка.ТребованиеНакладная"

2) Поиск объекта в базе приемнике осуществляется по внутреннему идентификатору объекта, если объект не найден, до будет создан новый с соблюдением номерации
базы приемника

3) Для конвертации свойств используются: ПКО.пит_Проекты, ПКО.СтатьиЗатрат
4) Используется событие "После загрузки", где производится дозаполнение свойств объекта уникальных для приемника.
5) Используются:
    а)Алгоритмы: "ЗаполнениеСведенийПрослеживаемости"
    б)Запросы: "ПоискПодразделения", "ПоискСчетаУчета"
6) Нестандартные ПКС - отсутствуют

=============================================

ПКО.РеализацияТовара
1) Добавлено новое правило конвертации данных. Источник "ДокументСсылка.ПР_РеализацияТовараДляОбмена"
Приеминк "ДокументСсылка.РеализацияТоваровУслуг"

2) Поиск объекта в базе приемнике осуществляется по внутреннему идентификатору объекта, если объект не найден, до будет создан новый с соблюдением номерации
базы приемника

3) Для конвертации свойств используются: ПКО.пит_Проекты и ПКО.СтатьиЗатрат, ПКО.СтавкиНДС
4) Используется событие "После загрузки", где производится дозаполнение свойств объекта уникальных для приемника.
5) Используются:
    а)Алгоритмы: "ЗаполнениеСведенийПрослеживаемости"
    б)Запросы: "ПоискПроектаПерепродажи", "ПоискКонтрагентаПоОрганизации", "ПоискДоговораПоКонтрагентуИОрганизации", "ПоискСтатьиДохода"
6) Нестандартные ПКС: Заполнения значения ставки НДС, по умолчанию 20%
